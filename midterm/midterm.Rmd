---
title: "Midterm"
author: "Francis Olakangil"
date: "2023-10-18"
output: html_document
editor_options: 
  chunk_output_type: console
---

Below is your midterm take home exam for DSCI 101 for Fall 2023. You have two options as was previously discussed to take the midterm take home. 

1) **Take the exam alone only answering questions marked as individual** By taking this exam alone you are not working with any other students in the class or other resources outside of this class. *If you are found to be working with someone else an automatic 0 will be given on the midterm exam (both in class and take home).*

2) **Work on the exam with a partner (predetermined) and answer all questions and parts on the exam.** When working with your partner you are only allowed to work with each other and no other groups or individuals in the class. *If your group is found to be working with others an automatic 0 will be given on the midterm exam (both in class and take home).*

You will be examining the class survey dataset that was given at the beginning of the semester for this part of the takehome exam. I have cleaned the dataset for general use. Please refer back to the survey [here](https://forms.office.com/r/SZjyvarqjD). 

1. Read in the dataset `cleaned_midterm_data.csv` in the data folder under the midterm folder. As previously done on the in class portion of the exam, label each variable in the dataset for which variable type it should be. Then do this in code so that the computer knows what variable type it should be. Are there any problems where the variable can't/shouldn't be the proper variable type? (20pts Ind. 15pts Partner)

| Variable|Variable Type  |
|---|---|
| major  | character |
| year   | character |
| sport  | character |
| born   | character |
| subject| character |
| bday   | character |
| sibling| integer |
| social_media| character |
| color  | character |
| cereal | character |
| learn_dsci| character |
| books  | integer |
| news   | character |
| fight  | character |
| grade  | character |
| zodiac | character |

```{r}
library(tidyverse)
survey <- read_csv("../midterm/data/cleaned_midterm_data.csv")
view(survey)

#assuming that character and string are interchangeable
class(survey$major) = "Character"
class(survey$year) = "Character"
class(survey$sport) = "Character"
class(survey$born) = "Character"
class(survey$subject) = "Character"
class(survey$bday) = "Character"
class(survey$height) = "Integer"
class(survey$sibling) = "Integer"
class(survey$social_media) = "Character"
class(survey$color) = "Character"
class(survey$cereal) = "Character"
class(survey$learn_dsci) = "Character"
class(survey$books) = "Integer"
class(survey$news) = "Character"
class(survey$fight) = "Character"
class(survey$grade) = "Character"
class(survey$zodiac) = "Character"

glimpse(survey)
```

2. Answer the following questions.
* Which class group makes up the most of the survey?
* Whats the most common zodiac in the survey? Are there any zodiacs not present in the survey?
* Who does the survey think will win in a fight, hot dog, grilled cheese, or a taco?
* Are more people born on even or odd days?
* What grade to people think they will get in the class?

(20pts Ind. 15pts Partner)
```{r}
frequency_class <- table(survey$year)
frequent_classgroup <- names(frequency_class[which.max(frequency_class)])
#max function finds value in specified column that pops up the most
cat("The class group that makes up the most of the survey is", frequent_classgroup)
#cat function concatenates different objects to then print, in this case a string/chr object and the freq. variable that was created.

frequency_zodiac <- table(survey$zodiac)
frequent_symbol <- names(frequency_zodiac[which.max(frequency_zodiac)])
cat("The most common zodiac is", frequent_symbol)

zodiac_presence <- length(unique(survey$zodiac))
ifelse(zodiac_presence < 12, "There ARE zodiacs not present in the survey", "All zodiacs are present in the survey")
#zodiac_presence counts the number of unique values in zodiac column
#ifelse returns that there are zodiacs missing if the zodiac_presence value is below 12 because there is one zodiac for every month of the year

food_victory <- table(survey$fight)
victor <- names(food_victory[which.max(food_victory)])
cat("The survey thinks", victor, "will win in a fight because that is the player that the majority of the survey thinks will win")
#use which.max function again to find mode of fight column, which gives value that most of the survey thinks will win

even_bday <- survey %>% 
  filter(bday == "even")
even_people <- nrow(even_bday)

odd_bday <- survey %>% 
  filter(bday == "odd")
odd_people <- nrow(odd_bday)

ifelse(odd_people > even_people, "There are more people born on odd days in the survey", "There are more people born on even days in the survey")

pull(survey, grade)
#directly answers what grade people think they will get in the class

grades <- table(survey$grade)
majority_grade <- names(grades[which.max(grades)])
cat("The majority of people in the survey think they will receive a grade of", majority_grade)
```

3. Make a bar plot of people's favorite color. Make sure that the bars for each color match the color that is given, ie. if there are 3 people who like pink then that bar will be pink. Create a nice graphic with appropriate labels. (20pts Ind. 15pts Partner)

```{r}
favcolor_plot <- survey %>% 
  ggplot(aes(x = factor(color), fill = color)) +
  #using factor(color) bc ggplot assumes aes arguments are continuous/quantitative, factor() denotes color as categorical and discrete variable to be knitted
  geom_bar() +
  ggtitle("People's Favorite Color") +
  labs(y = "Frequency", x = "Color") +
  scale_fill_manual(values = c("Black" = "black",
                               "Blue" = "blue",
                               "Brown" = "brown",
                               "Green" = "green",
                               "Pink" = "pink",
                               "Purple" = "purple",
                               "Red" = "red",
                               "Yellow" = "yellow"))
#using RGB specific codes also possible for scale_fill_manual parameters
#fill=color in aes argument saying to fill quantities associated with x-axis with specified color
favcolor_plot
```

4. Is there a difference in the average number of siblings in students who are data science majors or other majors? Is there a difference in the most popular subject in HS between students who are data science majors or another major? Is there a difference in each date students were born on (even or odd) depending if they are a data science major or something else? Give you your thoughts on these results. (20pts Ind. 15pts Partner)

```{r}
ds_siblings <- survey %>% 
  filter(major == "data science") %>% 
  summarise(ds_mean = mean(sibling, na.rm = TRUE))
#na.rm removes any empty cells from the dataset when calculating the mean
#need to use summarise when calculating mean, otherwise mean() won't recognize sibling argument as logical/numeric
ds_siblings

nonds_siblings <- survey %>% 
  filter(major != "data science") %>% 
  summarise(nonds_mean = mean(sibling, na.rm = TRUE))
nonds_siblings

ifelse(ds_siblings > nonds_siblings | ds_siblings < nonds_siblings, "There is a difference between the average number of siblings of students who are data science majors and those who aren't.", "There is not a difference between the average number of siblings of data science majors and other majors.")

ds_subject <- survey %>% 
  filter(major == "data science")
ds_subject

ds_subjfreq <- table(ds_subject$subject) 
ds_favsubj <- names(ds_subjfreq[which.max(ds_subjfreq)])
cat("The most popular high school subject among data science majors was", ds_favsubj)

nonds_subject <- survey %>% 
  filter(major != "data science")
nonds_subject

nonds_subjfreq <- table(nonds_subject$subject)
nonds_favsubj <- names(nonds_subjfreq[which.max(nonds_subjfreq)])
cat("The most popular high school subject among non-ds majors was", nonds_favsubj)

ifelse(nonds_favsubj == ds_favsubj, "There is NO difference in the favorite subjects between ds majors and non-ds majors", "There IS a difference between the favorite subjects of ds and non-ds majors")

ds_evenbirths <- survey %>%
  filter(major == "data science") %>%
  summarise(even_count = sum(bday == "even"))
ds_evenbirths

ds_oddbirths <- survey %>% 
  filter(major == "data science") %>%
  summarise(odd_count = sum(bday == "odd"))
ds_oddbirths

nonds_evenbirths <- survey %>% 
  filter(major != "data science") %>% 
  summarise(nonds_evencount = sum(bday == "even"))
nonds_evenbirths

nonds_oddbirths <- survey %>% 
  filter(major != "data science") %>% 
  summarise(nonds_oddcount = sum(bday == "odd"))
nonds_oddbirths

ifelse((ds_oddbirths + ds_evenbirths) > (nonds_evenbirths + nonds_oddbirths) | (ds_oddbirths + ds_evenbirths) < (nonds_evenbirths + nonds_oddbirths), "There IS a difference bw the dates that ds-major students and non-ds major students were born on", "There is NOT a difference bw the dates that ds-major students and non-ds major students were born on")
  
#Thoughts on these results: Overall, I think that there was little to no correlation between these measurements and whether or not the participant was a data science major or not.
```

5. Find the average and standard deviation of height from the survey by even or odd birthday. Do this where you replace the incorrect input with a missing value. **Partner Only** Replace the incorrect input with its proper value in inches, recalculate the average and standard deviation. (20pts Ind. 20pts Partner)

```{r}
#fixing incorrect input with converting all values to numerics.
survey$height <- as.numeric(survey$height)

#filter for rows with even birthdays that then calculate height from
even_filter <- survey %>% 
  filter(bday == "even")
even_filter
average_even <- mean(even_filter$height, na.rm = TRUE)
cat("The height average for the even birthdays is", average_even)

sd_even <- sd(even_filter$height, na.rm = TRUE)
cat("The height SD for the even birthdays is", sd_even)

#new filter for rows with odd birthdays
odd_filter <- survey %>% 
  filter(bday == "odd")
odd_filter
average_odd <- mean(odd_filter$height, na.rm = TRUE)
cat("The height average for the odd birthdays is", average_odd)

sd_odd <- sd(odd_filter$height, na.rm = TRUE)
cat("The height SD for the odd birthdays is", sd_odd)

```

6. **Partner Only** Create a new variable that describe what [element the zodiac belong](https://www.penguin.com.au/articles/3571-which-of-the-four-elements-of-the-zodiac-are-you) in. Recreate this plot, using the colors navy, orange red, sky blue, and forest green. (Partner 20pts)

![](exam_plot1.png)
7. 